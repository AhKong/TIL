## 스프링의 진짜 핵심, 진짜 다형성이 무엇인지 알아보자
<br>

### 스프링의 진짜 핵심 
스프링은 자바 언어 기반의 프레임워크이며 자바의 가장 큰 특징은 __객체 지향 언어__ 이다. 즉, 스프링은 객체 지향 언어가 가진 강력한 특징을 살려내는 프레임워크이며 스프링은 좋은 객체 지향 애플리케이션을 개발할 수 있도록 도와주는 프레임워크 이다. 

<br>

### 객체 지향 프로그래밍?
- 객체 지향 프로그래밍은 컴퓨터 프로그램을 명령어의 목록으로 보는 시각에서 벗어나 여러개의 독립된 단위, 즉 객체들의 모임으로  파악하고자 하는 것이다. __각각의 객체는 메시지를 주고받고, 데이터를 처리할 수 있다.__
- 객체 지향 프로그래밍은 프로그램을 __유연하고 변경이 용이__ 하게 나들기 때문에 대규모 소프트웨어 개발에 많이 사용된다
    - 유연하고 변경에 용이하려면 레고 블럭을 조립하듯이 컴포넨트를 쉽고 유연하게 변경하면서 개발 할수 있어야 한다는 의미임
    - 객체 지향의 특징에는 추상화,캡슐화,상속 그리고 다형성이 있고 이를 가능하게 해주는 특징이 바로 다형성이다.


### 진짜 다형성
운전자는 차종이 변경되어도 면허만 있다면(자동차의 역할만 알고 있다면) 모든 차를 운전 할 수 있어야 한다.
<br>
로미오와 줄리엣 연극을 하는 로미오 역할의 배우는 누가 줄리엣을 연기하던간에 상관없어야 한다.

__위 두가지 예시의 핵심은 역할과 구현이 완벽하게 분리가 되었다는 것이다.__

<br>

### 역할과 구현을 분리?
쉽게 생각해서 역할은 인터페이스, 구현은 인터페이스를 구현한 클래스로 생각하면 된다.

역할과 구현으로 구분하면 세상이 단순해지고, 유연해지며 변경에도 편리해진다. 

#### 장점
1. 클라이언트는 대상의 역할(인터페이스)만 알면 된다.
2. 클라이언트는 구현 대상의 내부 구조를 몰라도 된다.
3. 클라이언트는 구현 대상의 내부 구조가 변경되어도 영향을 받지 않는다.
4. 클라이언트는 구현 대상 자체를 변경해도 영향 을 받지 않는다.

<br>

#### 현실세계는 현실세계고 실제 개발에선 어떻게 분리를 해야할까?

자바언어의 다형성을 활용하면 된다. (ex 오버라이딩)
위에서도 언급했듯이 역할=인터페이스, 구현=인터페이스를 구현한 클래스 혹은 구현 객체로 생각하면 쉽다.

객체를 설계할 때는 역할과 구현을 명확히 분리해야하고 선 역할(인터페이스) 후 구현 객체 순으로 설계가 되어야만 한다.
> 이런걸 고려 할 수 있냐 없냐가도 하나의 역량인거같음 (내생각)


<br>

#### 다형성의 본질 
인터페이스를 구현한 객체 인스턴스를 실행 시점에 유연하게 변경 할 수 있어야 한다. 
즉, 클라이언트를 변경하지않고 서버의 구현 기능을 유연하게 변경할 수 있어야한다.

<br>

#### 한계
역할(인터페이스)자체가 변하면, 클라이언트&서버 모두 큰 변경이 발생함 
-> 근데 이건 인터페이스 자체가 가지고 있는 한계라기 보단,,인터페이스 설계시 큰 그림을 못그렸거나 정말 생각지도 못한 추가 기능 혹은이슈가 발생한게 아닐지....? 

<br>

#### 정리하자면,,,

- 스프링과 객체지향에서는 다형성이 가장 중요하다. 
- 스프링은 다형성을 극대화해서 이용할 수 있게 도와준다.
- 스프링의 제어의 역전, 의존관계 주입은 __다형성을 활용해서 역할과 구현을 편리하게 다룰 수 있도록__ 지원한다
- 스프링을 사용하면 마치 레고 블럭을 조립하듯 구현을 편리하게 변경할 수 있다 ~ 

<br>

### 좋은 객체 지향 설계의 5가지 원칙(SOLID)
- SRP : 단일 책임 원칙(Single Responsibility Principle)
- __OCP__ : 개방-폐쇄 원칙(Open/Close Principle)
- LSP : 리스코프 치환 원칙 (Liskov Substitution Principle)
- ISP: 인터페이스 분리 원칙 (Interface Segregation Principle) 
- __DIP__: 의존관계 역전 원칙 (Dependency Inversion Principle)

<br>

#### __OCP__ : 개방-폐쇄 원칙(Open/Close Principle)
- 소프트웨어 요소는 확장에는 열려있으나 변경에는 닫혀있어야 한다










확장을 하려면 당연히 코드를 변경해야 하는거 아닌가? 라고 생각 할 수 있지만 다형성을 활용한 코드라면, 인터페이스를 구현한 새로운 클래스를 하나 만들어 새로운 기능을 구현가능하다. 


``` java
private MemberRepository ms = new MemeryMemberRepository()
```

```java
//private MemberRepository ms = new MemeryMemberRepository()
private MemberRepository ms = new JdbcMemberRepository()
```

위 코드를 보면 분명 다형성은 지켜졌지만 __클라이언트가 구현 클래스를 직접 선택__ 하는 문제점이 존재한다. 즉, 구현 객체를 변경하려면 클라이언트 코드를 변경해야하고 이는 OCP 원칙을 지키지 못한 코드가 된다.이를 해결하기 위해선 객체를 생성하고, 연관 관계를 맺어주는 별도의 조립, 생성자가 필요하다.


#### __DIP__: 의존관계 역전 원칙 (Dependency Inversion Principle)

프로그래머는 추상화에 의존해야지,구체화에 의존하면 안된다!
쉽게 이야기해서 구현 클래스에 의존하지말고, 인터페이스에 의존하라는 의미이다. 그리고 의존성 주입은 이 원칙을 따르는 방법 중 하나이다.
앞에서 이야기한 __역할에 의존해야 한다는 것과 같다.__ 객체 세상도 클라이언트가 인터페이스에 의존해야 유연하게 구현체를 변경할 수 있다. 구현체에 의존하게 되면 변경이 아주 어려워진다!!

OCP에서 설명한 코드는 인터페이스에 의존하지만 구현 클래스도 동시에 의존하고있고 이는 __DIP 위반__ 하고있다.

결국 다형성 만으로는 OCP,DIP를 지킬 수 없다.



### 객체 지향 설계와 스프링
스프링이야기에 왜 객체 지향 이야기가 나오는걸까?
__스프링은 DI ,Di 컨테이너 제공함으로써  다형성 + OCP,DIP를 가능하게 지원한다__ 

즉, 스프링은 클라이언트 코드의 변경 없이 기능 확장을 가능하도록 만들어 준다는 뜻이다

(다음 강의에서 코드로 확인)

#### 실무에서 무조건 인터페이스를 활용한 개발이 좋다고 할 수 있을까?
인터페이스를 도입하면 추상화라는 비용이 발생한다. 
그러니 기능을 확장알 가능성이 없다면, 구체 클래스를 직접 사용하고, 향후 꼭 필요할 때 리팩터링해서 인터페이스를 도입하는 것도 방법이다.



#### 출처
김영한 강의


